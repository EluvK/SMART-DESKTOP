---
title: "《SQL必知必会》读书笔记"
tags: 
categories: 
- "读书笔记"
---

#### 《MySQL Crash Course》 Edition by Ben Forta

#### 前言（2020.01.14）
上个星期看了十几章节的，没记笔记只是读过，今天面试题还是没写出来读过的部分，所以还是记笔记吧，服务器也是现成的，多动手多熟悉。

#### 配置
mysql  Ver 15.1 Distrib 10.4.10-MariaDB, for Linux

#### 资料、配套数据库下载
[官网](https://forta.com/books/0672327120/) or [百度云](https://pan.baidu.com/s/10KemEssxHl1Y_8AqiYu0qA)提取码: vnfs

#### 数据库导入：
- 建库：`create database [name];`
- 进入：`use [name];`
- 导入表：`source /[..link]/create.sql;`
- 导入数据：``source /[..link]/populate.sql;``

#### 术语
- 主键:
主键不应该更新，不应该重用，也不应该使用可能会改变的值作为主键。


#### 关键字
- `DISTINCT` 返回不同的值，注意会应用到所选的全部列中，只要有不一样的就都会被选入。
- `LIMIT` 限制返回结果数量，一个参数为个数，两个参数为(起点(0开始)，个数)
- `DESC` `ORDER`排序的附加参数，倒序排序，默认是`ASC`正序
- `WHERE` 操作符有`=` `<>` `!=` `<` `<=` `>` `>=` `BEWTEEN`、还有`IS NULL`
可以通过`AND` `OR`组合条件，且`AND`优先级大于`OR`先计算
可以用`IN`来设置范围，`NOT IN`表否定
- `LIKE`和通配符：`%`表示**0-∞**个任意字符组合、`_`表示**1**个任意字符
- `REGEXP`正则匹配，默认不区分大小写，加入`BINARY`来设置区分大小写。
1. `.`在正则中表示任意一个字符。`|`表示`OR`。
2. `[]`括起来部分表示其中的值中的任意一个，比如`[123]`表示`1|2|3`。加入`^`表示非，`[^123]`表示匹配除了1,2,3的任意其它字符。
3. 转义用`\\`双斜杆，`\\.`匹配`.`。
4. 其它的一些字符类见[表格1](#form_1)
5. 再用重复元字符表示重复个数：`*`0个或多个 `+`1个或多个 `?`0个或1个 `{n}`n个 `{n,}`不少于n个 `{n,m}`n到m个
6. 定位元字符：`^`文本开始、`$`文本结束
- AS 使用别名
- GROUP BY 分组，NULL会被分为一组，GROUP BY必须在WHERE之后、ORDER BY之前。
- HAVING 过滤GROUP BY的结果，用法类似WHERE。


#### 常用计算函数：
- Concat() : 拼接两个列。
- Trim(),[RL]Trim() : 去除空格。
- Upper(),Lower() : 文本大小写转换。
- Left(),Right() : 取串左右一定长度的子串。
- SubString() : 取子串。
- Locate() : 找一个子串是否在某个串中，返回它的位置。
- Soundex() : 返回串的SOUNDEX值。
- COUNT() : 计数，`*`计所有行包括NULL，列名计有这一项的行。
- MAX(),MIN(),SUM() : 列的最大值、最小值、平均值、和，忽略NULL。对列名加上DISTINCT关键字来排除相同的列名。

#### SELECT顺序
|子句|说明|
|:-:|:-:|
|SELECT|要返回的列或表达式|
|FROM|从中检索数据的表|
|WHERE|行级过滤|
|GROUP BY|分组说明|
|HAVING|组级过滤|
|ORDER BY|输出排序顺序|
|LIMIT|要检索的行数|

#### 一些对比：
- `LIKE`和`REGEXP`的区别：
`LIKE`只有完全符合给定规则的结果才被计入，而`REGEXP`只需要出现符合匹配结果的字段就会被计入

#### 表格
1. <span id="form_1">字符类</span>：

|类|说明|同理|
|:-:|:-:|:-:|
|[:alnum:]|任意字母和字符|[a-zA-Z0-9]|
|[:alpha:]|任意字母|[a-zA-Z]|
|[:blank:]|空格和制表|[\\t]|
|[:cntrl:]|ASCII控制字符|ASCII 0-31和127|
|[:digit:]|任意数字|[0-9]|
|[:graph:]|与[:print:]相同，但不包括空格| |
|[:lower:]|任意小写字母|[a-z]|
|[:print:]|任意可打印字符| |
|[:punct:]|既不在[:alnum:]又不在[:cntrl:]中的任意字符| |
|[:space:]|包括空格的任意空白字符|[\\f\\n\\r\\t\\v]|
|[:upper:]|任意大写字母|[A-Z]|
|[:xdigit:]|任意十六进制数字|[a-fA-F0-9]|


2. <span id="form_2">日期函数</span>:

|函数|说明|函数|说明|
|:-:|:-:|:-:|:-:|
|AddDate()|增加日期|AddTime()|增加时间|
|CurDate()|返回当前日期|CurTime()|返回当前时间|
|Date()|返回日期时间的日期部分|DateDiff()|计算两个日期之差|
|Date_Format()|返回格式化的日期或者时间串|DayOfWeek()|对于一个日期，返回对应的星期几|
|Day()|返回一个日期的天数部分|Hour()|返回一个时间的小时部分|
|Minute()|返回一个时间的分钟部分|Month()|返回一个时间的月份部分|
|Now()|返回当前日期的时间|Second()|返回一个时间的秒部分|
|Time()|返回日期时间的时间部分|Year()|返回一个日期的年份部分|
|Date_ADD()|灵活的日期运算函数|

3. <span id="form_3">数值处理函数</span>:

|函数|说明|函数|说明|
|:-:|:-:|:-:|:-:|
|Abs()|返回一个数值的绝对值|Cos()、Sin()、Tan()|返回一个数的三角函数值|
|Exp()|返回一个数的指数部分|Mod()|余数|
|Rand()|返回一个随机数|Sqrt()|返回一个数的平方根|


