---
title: "go-ethå•æœºéƒ¨ç½²ä½“éªŒ"
tags: 
- "ETH"
status: publish
categories: 
- "BlockChainLearning"
---


[toc]

## BASIC

### åŸºç¡€æ“ä½œï¼š
ä¸‹è½½ä»£ç ã€ç¼–è¯‘ç­‰è§[å®˜æ–¹ä»“åº“ go-ethereum](https://github.com/ethereum/go-ethereum)çš„`README.md`

### åˆ›ä¸–ä¿¡æ¯
æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼Œæ¢è·¯ä¸­é‡åˆ°çš„è®¸å¤šé—®é¢˜éƒ½æ˜¯æºäºåˆ›ä¸–å—é‡Œæ²¡æœ‰å¡«æ¸…æ¥šåˆ†å‰ç‰ˆæœ¬é«˜åº¦ã€‚ä»¥å¤ªåŠç»å†è¿‡å¤šæ¬¡åˆ†å‰åï¼Œç½‘ç»œä¸Šçš„å¾ˆå¤šæ•™ç¨‹éƒ½æœ‰äº›è¿‡æ—¶ã€‚
``` JSON
{
    "config": {
        "chainId": 666,
        "homesteadBlock": 0,
        "eip150Block": 0,
        "eip150Hash": "0x0000000000000000000000000000000000000000000000000000000000000000",
        "eip155Block": 0,
        "eip158Block": 0,
        "byzantiumBlock": 0,
        "constantinopleBlock": 0,
        "petersburgBlock": 0,
        "istanbulBlock": 0,
        "ethash": {}
    },
    "nonce": "0x0",
    "timestamp": "0x5d5cdc87",
    "extraData": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "gasLimit": "0x47b760",
    "difficulty": "0x80000",
    "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "coinbase": "0x0000000000000000000000000000000000000000",
    "alloc": {
        "0000000000000000000000000000000000000000": {
            "balance": "0x1"
        }
    },
    "number": "0x0",
    "gasUsed": "0x0",
    "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000"
}
```

## æ§åˆ¶å°åŸºç¡€æ“ä½œ

#### å‡†å¤‡å·¥ä½œ
``` BASH
make all
cd build/bin
mkdir private-eth
cd private-eth
cp ../geth .
vi genesis.json # è¾“å…¥ä¸Šé¢çš„é…ç½®æ–‡ä»¶ã€‚
```

#### åˆ›ä¸–ä¿¡æ¯
``` BASH
./geth --datadir ./data init genesis.json
```

#### å¯åŠ¨æ§åˆ¶å°
``` BASH
./geth --datadir ./data --networkid 666 --nodiscover console 2>>ouput.log
```

#### å‘½ä»¤ï¼š
##### æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿæœ‰çš„ç”¨æˆ·
``` BASH
eth.accounts
```

##### æŸ¥çœ‹è¯¦ç»†çš„ç”¨æˆ·ä¿¡æ¯
``` BASH
personal
```

##### åˆ›å»ºè´¦æˆ·
``` BASH
personal.newAccount('passwd')
```

##### æŸ¥çœ‹ä½™é¢
``` BASH
eth.getBalance(eth.accounts[0])
web3.fromWei(eth.getBalance(eth.accounts[0]), 'ether')
```

##### æŸ¥çœ‹coinbaseè´¦å·
``` BASH
eth.coinbase
```

##### è°ƒæ•´coinbaseè´¦æˆ·
``` BASH
miner.setEtherbase(eth.accounts[1])
```

##### æŒ–çŸ¿
``` BASH
miner.start(1) # æ‹¬å·é‡Œä¸å¡«çš„è¯æ˜¯é»˜è®¤å…¨åŠ›æŒ–çŸ¿
```

##### åœæ­¢
``` BASH
miner.stop()
```

##### è§£é”è´¦æˆ·
``` BASH
personal.unlockAccount(eth.accounts[0])
```

##### è½¬è´¦
``` BASH
eth.sendTransaction({from:eth.accounts[0],to:eth.accounts[1],value:web3.toWei(8,'ether')})
```

##### æŸ¥è¯¢äº¤æ˜“
``` BASH
eth.getTransaction("0x02d0a653139923acd02c79a4704705d182326dfd857f91e0247a324325a4b3a2")
eth.getTransactionReceipt("0x02d0a653139923acd02c79a4704705d182326dfd857f91e0247a324325a4b3a2")
```

## ç¼–è¯‘æ™ºèƒ½åˆçº¦ï¼š

#### å®‰è£…solidityç¼–è¯‘å™¨solc
``` BASH
apt install snapd
snap install solc

# use:
# /snap/bin/solc --bin --abi test.sol
```

- [ ] todo solc-select?

#### ç¼–è¯‘solidityåˆçº¦ï¼š
``` BASH
mkdir contract_test
cd contract_test
vi test.sol
```

è¾“å…¥é™„å½• [solidityåˆçº¦ç¤ºä¾‹1](#åˆçº¦ç¤ºä¾‹1)

ç¼–è¯‘å‘½ä»¤ï¼š
``` BASH
/snap/bin/solc --bin --abi test.sol

# ç¤ºä¾‹ç»“æœï¼š
======= 2.sol:Owner =======
Binary:
608060405234801561001057600080fd5b50610230806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806313af40351461004657806357a86f7d1461008a5780638da5cb5b14610094575b600080fd5b6100886004803603602081101561005c57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506100de565b005b610092610194565b005b61009c6101d6565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461013757600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610191578073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a905050505b50565b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff168156fea265627a7a723158208a5fb7352393d1d4f1952d56c21027796d1812508450f006f3576602d32aef5464736f6c63430005100032
Contract JSON ABI
[{"constant":false,"inputs":[],"name":"Init","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]
```

#### éƒ¨ç½²åˆçº¦ï¼š
æ‰“å¼€æ§åˆ¶å°ï¼š
`./geth --datadir ./data --networkid 666 --nodiscover console 2>>ouput.log`

``` BASH
# å°†ABIçš„å†…å®¹å¤åˆ¶å‡ºæ¥ï¼Œæ”¾åˆ° web3.eth.contract() ä¸­å»
> var contractAbi = web3.eth.contract([{"constant":true,..}]);

# å°†Binaryçš„å†…å®¹å¤åˆ¶å‡ºæ¥ï¼Œæ³¨æ„åœ¨å†…å®¹å‰é¢éœ€è¦åŠ ä¸Š '0x'
> var contractBin = '0x{<Binaryä¸­çš„å†…å®¹>}'

# è®¡ç®—éœ€è¦çš„ gas
> var gasValue = eth.estimateGas({data:contractBin})

# éƒ¨ç½²åˆçº¦
> var contract = contractAbi.new(
{
  from: web3.eth.accounts[0],
  data: contractBin,
  gas: gasValue
}, function (e, contract){
console.log(e, contract);
  if (typeof contract.address !== 'undefined') {
  console.log('Contract mined! address: ' + contract.address + '   transactionHash: ' + contract.transactionHash);
}
})
```

#### å¯åŠ¨çŸ¿å·¥ï¼Œåˆçº¦æ‰èƒ½éƒ¨ç½²å®Œæˆ
``` BASH

> miner.start()
// è¿‡ä¸€å°ä¼š

Contract mined! address: 0x4289aec1d7cb79c8b181f37bb9fa5939b2c9e2bb transactionHash: 0x41f4dda5868d21f883fcf41ebeb2bddd3cac737ba2f5e005c2b573d19a9edf33
```

#### è°ƒç”¨åˆçº¦
``` BASH
> contract.getLCM(2, 3, {from:eth.coinbase, gas:200000})

"0xd52f4fa99f66052078564b123820b84083ede17da789ad8520410fb3c57ec739"
```

1. å› ä¸º getLCM æ–¹æ³•ä¼šæ”¹å˜é“¾ä¸Šçš„æ•°æ®ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ—¶å€™ä¸€å®šè¦å¸¦ä¸Šåœ°å€{from:eth.coinbase}ï¼Œå¦åˆ™ä¼šæŠ¥é”™Error: invalid address
2. åœ¨äº¤æ˜“å‚æ•°ä¸­ï¼Œgas å‚æ•°çš„é»˜è®¤å€¼ä¸º 90000ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ˜¯ä¸å¤Ÿçš„ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±è®¾ç½®å¤§ä¸€ç‚¹ã€‚åœ¨äº¤æ˜“å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ eth.getTransactionReceipt('0x...') æŸ¥çœ‹å®é™…ä½¿ç”¨çš„ gas æ•°é‡ã€‚å¦‚ä¸‹å›¾


## wtopåˆçº¦
éªŒè¯wBNB.solåŠŸèƒ½çš„æ¢è·¯è¿‡ç¨‹ï¼š

### ç¼–è¯‘åˆçº¦
``` BASH
vi wtop.sol
```
è¾“å…¥é™„å½• [wtop.sol](#åˆçº¦ç¤ºä¾‹2) çš„ä»£ç 
``` BASH
r$ /snap/bin/solc --bin --abi wtop.sol 

======= wtop.sol:WTOP =======
Binary:
# è¾“å‡ºå¤ªé•¿æˆ‘å°±çœç•¥äº†
Contract JSON ABI
# è¾“å‡ºå¤ªé•¿æˆ‘å°±çœç•¥äº†
```

### å¯åŠ¨é“¾
``` BASH
ls
genesis.json  geth

./geth --datadir ./data init genesis.json
./geth --datadir ./data --networkid 666 --nodiscover console 2>>ouput.log

```

### åˆ›å»ºè´¦æˆ·æŒ–çŸ¿
``` BASH
> personal.newAccount('passwd')
"0xf632828b4e487708e4f602a634133c5733906c5c"
> eth.getBalance(eth.accounts[0])
0
> miner.start(1)
```

ç­‰ä¸€ä¼šåè´¦æˆ·é‡Œå°±æœ‰é’±äº†ï¼Œç»§ç»­è®©ä»–æŒ–ç€æ²¡å…³ç³»ã€‚
``` BASH
ğŸ”¨ mined potential block
...
eth.getBalance(eth.accounts[0])
4000000000000000000
```

### éƒ¨ç½²åˆçº¦

éƒ¨ç½²åˆçº¦å’Œä¸Šé¢ä¸€æ ·çš„ï¼Œbinå’Œabiçš„å†…å®¹æ”¹æˆç¼–è¯‘å‡ºæ¥çš„å°±è¡Œï¼Œå®Œæ•´è¿‡ç¨‹ï¼š
``` BASH
var contractAbi = web3.eth.contract([{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"dst","type":"address"},{"indexed":false,"internalType":"uint256","name":"wad","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"src","type":"address"},{"indexed":false,"internalType":"uint256","name":"wad","type":"uint256"}],"name":"Withdrawal","type":"event"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"deposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"wad","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]);
undefined
> var contractBin = '0x60806040526040518060400160405280600b81526020017f5772617070656420544f500000000000000000000000000000000000000000008152506000908051906020019061004f9291906100ca565b506040518060400160405280600481526020017f57544f50000000000000000000000000000000000000000000000000000000008152506001908051906020019061009b9291906100ca565b506012600260006101000a81548160ff021916908360ff1602179055503480156100c457600080fd5b5061016f565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061010b57805160ff1916838001178555610139565b82800160010185558215610139579182015b8281111561013857825182559160200191906001019061011d565b5b509050610146919061014a565b5090565b61016c91905b80821115610168576000816000905550600101610150565b5090565b90565b61060d8061017e6000396000f3fe6080604052600436106100705760003560e01c8063313ce5671161004e578063313ce5671461016b57806370a082311461019c57806395d89b4114610201578063d0e30db01461029157610070565b806306fdde031461007557806318160ddd146101055780632e1a7d4d14610130575b600080fd5b34801561008157600080fd5b5061008a61029b565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100ca5780820151818401526020810190506100af565b50505050905090810190601f1680156100f75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561011157600080fd5b5061011a610339565b6040518082815260200191505060405180910390f35b34801561013c57600080fd5b506101696004803603602081101561015357600080fd5b8101908080359060200190929190505050610341565b005b34801561017757600080fd5b50610180610472565b604051808260ff1660ff16815260200191505060405180910390f35b3480156101a857600080fd5b506101eb600480360360208110156101bf57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610485565b6040518082815260200191505060405180910390f35b34801561020d57600080fd5b5061021661049d565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561025657808201518184015260208101905061023b565b50505050905090810190601f1680156102835780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b61029961053b565b005b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103315780601f1061030657610100808354040283529160200191610331565b820191906000526020600020905b81548152906001019060200180831161031457829003601f168201915b505050505081565b600047905090565b80600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054101561038d57600080fd5b80600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055503373ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015610420573d6000803e3d6000fd5b503373ffffffffffffffffffffffffffffffffffffffff167f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65826040518082815260200191505060405180910390a250565b600260009054906101000a900460ff1681565b60036020528060005260406000206000915090505481565b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156105335780601f1061050857610100808354040283529160200191610533565b820191906000526020600020905b81548152906001019060200180831161051657829003601f168201915b505050505081565b34600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055503373ffffffffffffffffffffffffffffffffffffffff167fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c346040518082815260200191505060405180910390a256fea265627a7a723158207f625d5f4e725a473ec9151bee16305a7ac8517606a1466da7a10ec8913e86a064736f6c63430005100032'
undefined
> var gasValue = eth.estimateGas({data:contractBin})
undefined
> personal.unlockAccount(eth.accounts[0])
Unlock account 0xf632828b4e487708e4f602a634133c5733906c5c
Passphrase: 
true
> var contract = contractAbi.new(
{
    from: web3.eth.accounts[0],
    data: contractBin,
    gas: gasValue
    }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
        console.log('Contract mined! address: ' + contract.address + '   transactionHash: ' + contract.transactionHash);
    }
})
null [object Object]
undefined
> null [object Object]
Contract mined! address: 0x12e98773d2fa568c055f8ca23ecd0d27becde9c7   transactionHash: 0xd4e4b47949345222f2e93758cd68b9bf91e0cd77a3d008e992ef9beb4b94ccd1

```

å¾—åˆ°åˆçº¦åœ°å€ï¼š0x12e98773d2fa568c055f8ca23ecd0d27becde9c7

æ­¤æ—¶åˆçº¦åœ°å€é‡Œæ˜¯æ²¡æœ‰native tokençš„ï¼š
``` BASH
> eth.getBalance("0x12e98773d2fa568c055f8ca23ecd0d27becde9c7")
0
```
ä¹Ÿæ²¡æœ‰`totalSupply`:
``` BASH
> contract.totalSupply()
0
```

### è´¨æŠ¼å’Œèµå›
è´¨æŠ¼ä¸€ç‚¹é’±ï¼Œå› ä¸ºä¸€ç›´åœ¨æŒ–çŸ¿ï¼Œè´¦æˆ·ä½™é¢æŒç»­å¢åŠ ï¼Œéšä¾¿è´¨æŠ¼ä¸ªæ•°å€¼æ¯”è¾ƒå¥½çœ‹å‡ºæ¥è´¦æˆ·ä½™é¢å˜åŒ–ï¼š
``` BASH
> contract.deposit({from:eth.accounts[0],gas:2000000,value:99999})
"0xd4f085c571dd64d99b6e37721ae39764d7d8ecdb6ed830aac10073a006764d15"
```
ç­‰äº¤æ˜“è¢«æ‰“åŒ…å‡ºå—åå°±å¯ä»¥æŸ¥åˆ°ï¼š
``` BASH
eth.getTransaction("0xd4f085c571dd64d99b6e37721ae39764d7d8ecdb6ed830aac10073a006764d15")
eth.getTransactionReceipt("0xd4f085c571dd64d99b6e37721ae39764d7d8ecdb6ed830aac10073a006764d15")
```
å†çœ‹è´¦æˆ·ä½™é¢å’Œåˆçº¦è´¦æˆ·ä½™é¢ï¼š
``` BASH
> eth.getBalance(eth.accounts[0])
109999999999999900001

> eth.getBalance("0x12e98773d2fa568c055f8ca23ecd0d27becde9c7")
99999

> contract.totalSupply()
99999

```

å–å‡ºè´¨æŠ¼çš„ä¸€éƒ¨åˆ†ï¼š
``` BASH
> contract.withdraw(333,{from:eth.accounts[0],gas:200000})
"0x2ecd139019eb8ab8cf8f629770e370667ddf53fb90e910e4b18c1ed7a8e33788"

> #ç­‰å‡ºå—åï¼š

> eth.getBalance(eth.accounts[0])
145999999999999900334  # å°¾æ•°å¯ä»¥çœ‹å‡ºæ¥å˜åŒ–

> eth.getBalance("0x12e98773d2fa568c055f8ca23ecd0d27becde9c7")
99666

> contract.totalSupply()
99666
```

### æ€»ç»“
å†åŠ ä¸Šerc20çš„åŠŸèƒ½ï¼ŒåƒWBNB.solè¿™æ ·ï¼Œå°±å¯ä»¥å®ç°ä¸€ä¸ªerc20+1:1å…‘æ¢çš„ç³»ç»Ÿåˆçº¦ã€‚æ‰“é€šä»¥å¤ªåŠä¾§é“¾ä¸Šçš„èµ„é‡‘æµå…¥ã€‚

## ç³»ç»Ÿgenesisåˆçº¦ï¼š
åœ¨genesis.jsonçš„allocå­—æ®µé‡Œï¼Œå¯ä»¥é¢„åˆ†é…è´¦æˆ·balanceå’Œcode:
``` JSON
"alloc": {
        "0xe500000000000000000000000000000000001004":{
            "balance": "0x0",
            "code": "0x6080604052348015600f57600080fd5b5060043610603c5760003560e01c80634e70b1dc14604157806360fe47b114605d5780636d4ce63c146088575b600080fd5b604760a4565b6040518082815260200191505060405180910390f35b608660048036036020811015607157600080fd5b810190808035906020019092919050505060aa565b005b608e60b4565b6040518082815260200191505060405180910390f35b60005481565b8060008190555050565b6000805490509056fea26469706673582212203dbfc1adb15b4dec5382f8a9ec86fceb83bf0afa7d94284629ad84f40229ba2e64736f6c63430006040033"
        }
    },
```

å‡ ä¸ªæ³¨æ„çš„ç‚¹ï¼š
1. è¿™ä¸ªcodeéœ€è¦ä½¿ç”¨å‘½ä»¤ï¼š `solc --bin-runtime` æ¥ç¼–è¯‘å‡ºæ¥ï¼Œ`--bin`ä¸è¡Œã€‚[å‚è€ƒ](https://ethereum.stackexchange.com/questions/7707/is-it-possible-to-preload-contracts-in-the-genesis-block)
2. å¯åŠ¨æ§åˆ¶å°åè·å–è¿™ä¸ªcontractçš„å¯¹è±¡ï¼š`eth.contract(ABI).at(Address)`
``` BASH
> var c = eth.contract([{"inputs":[],"name":"get","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"num","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"val","type":"uint256"}],"name":"set","outputs":[],"stateMutability":"nonpayable","type":"function"}])
undefined
> var cc = c.at("0xe500000000000000000000000000000000001004")
```
3. è°ƒç”¨ï¼š
``` BASH
> cc.get.call()
0
> cc.set(123,{from:eth.accounts[0],gas:200000})
"0x0d4b182b9612ab4fcee7625b47d5f6063141d698786708efa091db8882f4b898"
> cc.get.call()
123
```

## ç¼–è¯‘åˆçº¦çš„GOæ¥å£package
`./abigen --abi test.abi --pkg contract_name --pkg pkg_name --type type_name --out test.go`
abiæ–‡ä»¶åªèƒ½æœ‰ä¸€è¡Œabiä¿¡æ¯:`[{...}]`
`--pkg` å½±å“æœ€ç»ˆæ–‡ä»¶é‡Œçš„ `package pkg_name`
`--type` å½±å“æ•´ä¸ªcontractçš„ç±»åï¼Œå¯ä»¥ä¸å¡«ï¼Œå°±å’Œ`package`ä¸€æ ·ã€‚

## é™„å½•ï¼š
#### åˆçº¦ç¤ºä¾‹1

``` js
pragma solidity ^0.5.0;

contract Owner {
   //åˆçº¦æ‹¥æœ‰è€…
   address public owner;

   //æ„é€ å‡½æ•°ï¼Œå°†åˆçº¦çš„æ‰€æœ‰æƒç»™äºˆå‘å¸ƒè€…
   function Init() public {
       owner = msg.sender;
   }

   //ä»…æœ‰åˆçº¦çš„æ‹¥æœ‰è€…å¯ä»¥æ“ä½œ
   modifier onlyOwner() {
       require(msg.sender == owner);
       _;
   }

   //onlyOwnerä½œä¸ºå‡½æ•°æ‰§è¡Œçš„å‰ç½®æ¡ä»¶ï¼Œä»…æœ‰åˆçº¦æ‹¥æœ‰è€…å¯ä»¥æ›´æ¢æ‰€å±æƒ
   function setOwner(address to) public onlyOwner {
       if(to != address(0)) {
           owner == to;
       }
   }
}

//é€šè¿‡isä½¿Computeç»§æ‰¿Owneråˆçº¦
contract Compute is Owner {

   //å»ºç«‹ä¸€ä¸ªå­˜å‚¨äºåŒºå—é“¾ä¸Šçš„äºŒç»´æ•°ç»„ï¼Œå­˜å‚¨æ¯ä¸€æ¬¡è®¡ç®—çš„è¾“å…¥ä»¥åŠç»“æœ
   uint[3][] records;

   //æ¯”è¾ƒå¤§å°ï¼Œsolidityå…è®¸è¿”å›ä¸¤ä¸ªå€¼
   function compare(uint first, uint second) internal pure returns(uint bigOne, uint smallOne) {
       if(first > second) {
           return (first, second);
       }
       else {
           return (second, first);
       }
   }

   //å»ºç«‹äº‹ä»¶å»ç›‘å¬æ¯ä¸€æ¬¡è®¡ç®—å¹¶è®°å½•æ—¥å¿—
   event GetLCM(uint first, uint second, uint result);

   function getLCM(uint first, uint second) external onlyOwner returns(uint) {
       if (first == second) {
           return first;
       }
       else {
           uint bigOne;uint smallOne;
           (bigOne, smallOne) = compare(first, second);
           uint i = 1;
           while(true) {
               uint mul = i * bigOne;
               if(mul % smallOne == 0) {
                   uint index = records.push([first, second, mul]) - 1;

                   //è°ƒç”¨äº‹ä»¶
                   emit GetLCM(first, second, mul);

                   return index;
               }
               i++;
           }
       }
   }

   //æ ¹æ®ç´¢å¼•è·å–æ¸¸æˆè®°å½•
   function getRecord(uint index) external onlyOwner view returns(uint[3] memory) {
       return records[index];
   }
}
```

#### åˆçº¦ç¤ºä¾‹2

wtop.sol

``` js
pragma solidity ^0.5.0;

contract WTOP {
    string public name     = "Wrapped TOP";
    string public symbol   = "WTOP";
    uint8  public decimals = 18;

    event  Deposit(address indexed dst, uint wad);
    event  Withdrawal(address indexed src, uint wad);

    mapping (address => uint) public  balanceOf;

    function deposit() public payable {
        balanceOf[msg.sender] += msg.value;
        emit Deposit(msg.sender, msg.value);
    }
    function withdraw(uint wad) public {
        require(balanceOf[msg.sender] >= wad);
        balanceOf[msg.sender] -= wad;
        msg.sender.transfer(wad);
        emit Withdrawal(msg.sender, wad);
    }

    function totalSupply() public view returns (uint) {
        return address(this).balance;
    }
}
```

## å‚è€ƒèµ„æ–™ï¼š
https://www.jianshu.com/p/6c166db70388

https://goethereumbook.org/smart-contracts/

https://docs.soliditylang.org/en/v0.5.0/types.html#address